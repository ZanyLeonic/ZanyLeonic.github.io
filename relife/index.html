<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>rEEEEEEE</title>
  </head>
  <body onload="getCode()">
    <h1>Auth completed!</h1>
    <p>Copy this code to the bot:<br /><input id="code" type="text" onclick="copyToBoard()"></input></p>
    <script type="text/javascript">
      function getCode() {
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        
        document.getElementById("code").value = urlParams.get("code");
      }
      
      function copyToBoard() {
        /* From https://www.w3schools.com/howto/howto_js_copy_clipboard.asp */
        /* Get text element */
        var copyText = document.getElementById("code");

        /* Select the text field */
        copyText.select();
        copyText.setSelectionRange(0, 99999); /* For mobile devices */

        /* Copy the text inside the text field */
        navigator.clipboard.writeText(copyText.value);
      }
      
      var input = document.querySelector('input'); // get the input element
      input.addEventListener('input', resizeInput); // bind the "resizeInput" callback on "input" event
      resizeInput.call(input); // immediately call the function

      function resizeInput() {
        this.style.width = this.value.length + "ch";
      }
    </script>
  </body>
</html>
